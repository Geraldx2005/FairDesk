<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fairdesk - <%= title %></title>
    <link rel="icon" href="/assets/fairfavicon.png" type="image/png" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" />
    <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/css/choices.min.css" />
    <!-- <link rel="stylesheet" href="/css/ratecalculator.css" /> -->
    <link rel="stylesheet" href="/css/common.css" />
    <% if (CSS) { %>
    <link rel="stylesheet" href="/css/<%= CSS %>" />
    <% } %>

    <style>
      .toast-notification {
        position: fixed;
        bottom: 20px;
        right: -300px; /* start off-screen */
        background-color: #d1e7dd; /* match sidebar dark */
        color: #0a3646;
        padding: 12px 40px 12px 15px;
        border-radius: 8px;
        box-shadow: 0 4px 10px rgba(255, 255, 255, 0.3);
        z-index: 9999;
        font-family: Arial, sans-serif;
        font-size: 18px;
        border-left: 4px solid #0a3646; /* green accent */
        animation: slideIn 0.5s forwards;
      }

      .toast-close {
        position: absolute;
        right: 12px;
        top: 6px;
        cursor: pointer;
        font-weight: bold;
        font-size: 18px;
        color: #0a3646;
      }

      /* Hide page content until JS finishes */
      .page-content {
        opacity: 0;
      }
      .page-content.ready {
        opacity: 1;
        transition: opacity 0.15s ease-in;
      }    

      .toast-success {
        background-color: #d1e7dd;
        color: #0a3646;
        border-left: 4px solid #0a3646;
      }

      .toast-error {
        background-color: #f8d7da;
        color: #842029;
        border-left: 4px solid #842029;
      }

      @keyframes slideIn {
        from {
          right: -300px;
          opacity: 0;
        }
        to {
          right: 20px;
          opacity: 1;
        }
      }

      @keyframes slideOut {
        from {
          right: 20px;
          opacity: 1;
        }
        to {
          right: -300px;
          opacity: 0;
        }
      }
    </style>
  </head>
  <body>
    <% if ((notification && notification.length) || (error && error.length)) { %>
    <div class="toast-notification <%= error && error.length ? 'toast-error' : 'toast-success' %>" id="toast">
      <span> <%= error && error.length ? error[0] : notification[0] %> </span>
      <span class="toast-close" onclick="hideToast()">Ã—</span>
    </div>
    <% } %>

    <nav>
      <h1>Fairtech</h1>
    </nav>
    <div class="contain">
      <!-- Navigation bar -->
      <div class="side-nav nav-panel-toggle">
        <div title="Expand" class="nav-items nav-toggle">
          <i class="fa-solid fa-bars" style="color: #ffffff"></i>
          <p class="nav-items-para">Navigation</p>
        </div>

        <div class="nav-opt-wrap">
          <div title="View" class="view-toggle nav-items">
            <i class="fa-solid fa-square-caret-down" style="color: #ffffff"></i>
            <p class="nav-items-para">View</p>
          </div>

          <div class="nav-labels-opt">
            <div title="Master View" class="<%= title === 'Master View' ? 'nav-items active' : 'nav-items' %>" onclick="window.location.href = '/fairdesk/master/view'" style="border-top: 2px solid #ffffff9d;" >
              <i class="fa-solid fa-eye" style="color: #ffffff"></i>
              <p class="nav-items-para">Master View</p>
            </div>
            <div title="Client View" class="<%= title === 'Client View' ? 'nav-items active' : 'nav-items' %>" onclick="window.location.href = '/fairdesk/client/view'" style="border-bottom: 2px solid #ffffff9d;" >
              <i class="fa-solid fa-eye" style="color: #ffffff"></i>
              <p class="nav-items-para">Client View</p>
            </div>            
          </div>
        </div>

        <div class="nav-opt-wrap">
          <div title="Masters" class="masters-toggle nav-items">
            <i class="fa-solid fa-square-caret-down" style="color: #ffffff"></i>
            <p class="nav-items-para">Masters</p>
          </div>

          <div class="nav-labels-opt">
            <div title="Client Data" class="<%= title === 'Client Form' ? 'nav-items active' : 'nav-items' %>" onclick="window.location.href = '/fairdesk/form/client'" style="border-top: 2px solid #ffffff9d" >
              <i class="fa-solid fa-user" style="color: #ffffff"></i>
              <p class="nav-items-para">Client Data</p>
            </div>
            <div title="Labels" class="<%= title === 'Labels' ? 'nav-items active' : 'nav-items' %>" onclick="window.location.href = '/fairdesk/form/labels'" >
              <i class="fa-solid fa-address-card" style="color: #ffffff"></i>
              <p class="nav-items-para">Labels</p>
            </div>
            <div title="TTR" class="<%= title === 'TTR' ? 'nav-items active' : 'nav-items' %>" onclick="window.location.href = '/fairdesk/form/ttr'" >
              <i class="fa-solid fa-ribbon" style="color: #ffffff"></i>
              <p class="nav-items-para">TTR</p>
            </div>
            <div title="Tape" class="<%= title === 'Tape' ? 'nav-items active' : 'nav-items' %>" onclick="window.location.href = '/fairdesk/form/tape-master'" >
              <i class="fa-solid fa-tape" style="color: #ffffff"></i>
              <p class="nav-items-para">Tape</p>
            </div>
            <div title="Block" class="<%= title === 'Block' ? 'nav-items active' : 'nav-items' %>" onclick="window.location.href = '/fairdesk/form/block'" >
              <i class="fa-solid fa-cube" style="color: #ffffff"></i>
              <p class="nav-items-para">Block</p>
            </div>
            <div title="Die" class="<%= title === 'Die' ? 'nav-items active' : 'nav-items' %>" onclick="window.location.href = '/fairdesk/form/die'" style="border-bottom: 2px solid #ffffff9d" >
              <i class="fa-solid fa-brush" style="color: #ffffff"></i>
              <p class="nav-items-para">Die</p>
            </div>
          </div>
        </div>

        <!-- <div class="nav-opt-wrap">
          <div title="Care" class="care-toggle nav-items">
            <i class="fa-solid fa-circle-chevron-down" style="color: #ffffff"></i>
            <p class="nav-items-para">Care</p>
          </div>

          <div class="nav-care-opt">
            <div title="System ID" class="nav-items" onclick="window.location.href = '/fairdesk/form/systemid'">
              <i class="fa-solid fa-id-badge" style="color: #ffffff"></i>
              <p class="nav-items-para">System ID</p>
            </div>
            <div title="Care Call Report" class="nav-items" onclick="window.location.href = '/fairdesk/form/carecallreport'" >
              <i class="fa-solid fa-file" style="color: #ffffff"></i>
              <p class="nav-items-para">Call Report</p>
            </div>
            <div title="Care Workshop Report" class="nav-items" onclick="window.location.href = '/fairdesk/form/careworkshopreport'">
              <i class="fa-solid fa-shop" style="color: #ffffff"></i>
              <p class="nav-items-para">Workshop Report</p>
            </div>
            <div title="Carelead" class="nav-items" onclick="window.location.href = '/fairdesk/form/carelead'">
              <i class="fa-solid fa-notes-medical" style="color: #ffffff"></i>
              <p class="nav-items-para">Lead</p>
            </div>
            <div title="Care Quote" class="nav-items" onclick="window.location.href = '/fairdesk/form/carequote'">
              <i class="fa-solid fa-quote-left" style="color: #ffffff"></i>
              <p class="nav-items-para">Quote</p>
            </div>
          </div>
        </div> -->
        <!-- <div title="Rate Calculator" class="nav-items" onclick="window.location.href = '/fairdesk/form/ratecalculator'">
          <i class="fa-solid fa-calculator" style="color: #ffffff"></i>
          <p class="nav-items-para">Rate Calculator</p>
        </div> -->

        <!-- <div class="nav-opt-wrap"> -->
        <!-- <div title="Rate Calculator" class="calc-toggle nav-items">
            <i class="fa-solid fa-square-caret-down" style="color: #ffffff"></i>
            <p class="nav-items-para">Rate Calculator</p>
          </div> -->

        <!-- <div class="nav-calc-opt">
            <div title="Sales Calculator" class="nav-items" onclick="window.location.href = '/fairdesk/form/salescalc'">
              <i class="fa-solid fa-money-bill-transfer" style="color: #ffffff"></i>
              <p class="nav-items-para">Sales Calculator</p>
            </div>
          </div> -->

        <div class="nav-opt-wrap">
          <div title="Masters" class="masters-toggle nav-items">
            <i class="fa-solid fa-square-caret-down" style="color: #ffffff"></i>
            <p class="nav-items-para">HR</p>
          </div>

          <div class="nav-labels-opt">
            <!-- ===== VIEW HEADING ===== -->
            <div class="nav-items" style="cursor: default; opacity: 0.6; pointer-events: none">
              <p class="nav-items-para" style="font-size: 11px; letter-spacing: 1px">VIEWS</p>
            </div>

            <div title="Petty Cash View" class="<%= title === 'Petty Cash View' ? 'nav-items active' : 'nav-items' %>" onclick="window.location.href = '/fairdesk/pettycash/view'" style="border-top: 2px solid #ffffff9d; margin-bottom: 5px">
              <i class="fa-solid fa-address-book" style="color: #ffffff"></i>
              <p class="nav-items-para">Petty Cash</p>
            </div>            

            <div title="Employee View" class="<%= title === 'Employee View' ? 'nav-items active' : 'nav-items' %>" onclick="window.location.href = '/fairdesk/employee/view'" >
              <i class="fa-solid fa-users-viewfinder" style="color: #ffffff"></i>
              <p class="nav-items-para">Employee</p>
            </div>

            <div title="Loan View" class="<%= title === 'Loan View' ? 'nav-items active' : 'nav-items' %>" onclick="window.location.href = '/fairdesk/loan/view'" >
              <i class="fa-solid fa-handshake" style="color: #ffffff"></i>
              <p class="nav-items-para">Loan</p>
            </div>

            <div title="Advance View" class="<%= title === 'Advance View' ? 'nav-items active' : 'nav-items' %>" onclick="window.location.href = '/fairdesk/advance/view'" >
              <i class="fa-solid fa-binoculars" style="color: #ffffff"></i>
              <p class="nav-items-para">Advance</p>
            </div>

            <div title="Payroll View" class="<%= title === 'Payroll View' ? 'nav-items active' : 'nav-items' %>" onclick="window.location.href = '/fairdesk/payroll/view'" style="border-bottom: 2px solid #ffffff9d" >
              <i class="fa-solid fa-address-book" style="color: #ffffff"></i>
              <p class="nav-items-para">Payroll</p>
            </div>

            <!-- ===== DATA ENTRY HEADING ===== -->
            <div class="nav-items" style="cursor: default; opacity: 0.6; pointer-events: none">
              <p class="nav-items-para" style="font-size: 11px; letter-spacing: 1px">DATA ENTRY</p>
            </div>

            <div title="Petty Cash" class="<%= title === 'Petty Cash' ? 'nav-items active' : 'nav-items' %>" onclick="window.location.href = '/fairdesk/pettycash/create'" style="border-top: 2px solid #ffffff9d" >
              <i class="fa-regular fa-money-bill-1" style="color: #ffffff"></i>
              <p class="nav-items-para">Petty Cash</p>
            </div>            

            <div title="Employee Details" class="<%= title === 'Employee Details' ? 'nav-items active' : 'nav-items' %>" onclick="window.location.href = '/fairdesk/employee/create'" >
              <i class="fa-solid fa-users" style="color: #ffffff"></i>
              <p class="nav-items-para">Emp Details</p>
            </div>

            <div title="Loan" class="<%= title === 'Loan' ? 'nav-items active' : 'nav-items' %>" onclick="window.location.href = '/fairdesk/loan/create'" >
              <i class="fa-solid fa-landmark" style="color: #ffffff"></i>
              <p class="nav-items-para">Loan</p>
            </div>

            <div title="Advance" class="<%= title === 'Advance' ? 'nav-items active' : 'nav-items' %>" onclick="window.location.href = '/fairdesk/advance/create'" >
              <i class="fa-solid fa-arrow-up-1-9" style="color: #ffffff"></i>
              <p class="nav-items-para">Advance</p>
            </div>

            <div title="Payroll" class="<%= title === 'Payroll' ? 'nav-items active' : 'nav-items' %>" onclick="window.location.href = '/fairdesk/payroll/create'" >
              <i class="fa-regular fa-money-bill-1" style="color: #ffffff"></i>
              <p class="nav-items-para">Payroll</p>
            </div>
          </div>
        </div>

        <div class="nav-opt-wrap">
          <div title="View" class="view-toggle nav-items">
            <i class="fa-solid fa-square-caret-down" style="color: #ffffff"></i>
            <p class="nav-items-para">Production</p>
          </div>

          <div class="nav-labels-opt">
            <div title="Production Calculator" class="<%= title === 'Production Calculator' ? 'nav-items active' : 'nav-items' %>" onclick="window.location.href = '/fairdesk/form/prodcalc'" >
              <i class="fa-solid fa-industry" style="color: #ffffff"></i>
              <p class="nav-items-para">Production Calculator</p>
            </div>
          </div>
        </div>

        <div title="Client Tape" class="<%= title === 'Client Tape' ? 'nav-items active' : 'nav-items' %>" onclick="window.location.href = '/fairdesk/form/tape-binding'" >
          <i class="fa-solid fa-tape" style="color: #ffffff"></i>
          <p class="nav-items-para">Client Tape</p>
        </div>

        <div class="nav-opt-wrap">
          <div title="Stock" class="view-toggle nav-items">
            <i class="fa-solid fa-square-caret-down" style="color: #ffffff"></i>
            <p class="nav-items-para">Stock</p>
          </div>

          <div class="nav-labels-opt">
            <div title="Tape Stock" class="<%= title === 'Tape Stock' ? 'nav-items active' : 'nav-items' %>" onclick="window.location.href = '/fairdesk/tapestock'" style="border-top: 2px solid #ffffff9d; border-bottom: 2px solid #ffffff9d" >
              <i class="fa-solid fa-tape" style="color: #ffffff"></i>
              <p class="nav-items-para">Tape Stock</p>
            </div>
          </div>
        </div>        
      </div>

      <!--- Loading Content --->
      <div class="page-content" id="pageContent"></div>
        <%- body -%>
      </div>
    </div>

    <script src="/js/common.js" defer></script>
    <script src="/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="/js/BTStrap.js" defer></script>
    <script src="/js/choices.min.js"></script>
    <% if(JS) { %>
    <script src="/js/<%= JS %>" defer></script>
    <% } %>
<script>
  window.addEventListener("load", () => {
    document.getElementById("pageContent")?.classList.add("ready");
  });
</script>

    <script>
      const toast = document.getElementById("toast");

      function hideToast() {
        toast.style.animation = "slideOut 0.5s forwards";
        setTimeout(() => {
          toast.style.display = "none";
        }, 500);
      }

      // Auto hide after 5 seconds
      if (toast) {
        setTimeout(hideToast, 5000);
      }
    </script>
  </body>
</html>