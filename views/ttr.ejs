<% layout('/layout/boilerplate') %>
      <!-- The main content -->
      <div class="main-content">
        <form action="/fairdesk/form/ttr" method="post" class="needs-validation" autocomplete="off" novalidate>
          <div class="span-full form-heading">
            <h1>TTR</h1>
          </div>

          <div class="span-full form-subheading">
            <h1>User info</h1>
          </div>
          <div class="span-seven">
            <label for="ttr-product-id">Product ID</label>
            <input type="text" value="FS | TTR | <%= ttrCount.toString().padStart(6, '0') + 1 %>" id="ttr-product-id" class="form-control" name="productId" placeholder="Enter Product ID" readonly required />
          </div> 
           <div id="client-name-div" class="span-six">
            <div class="clientName-label"><label for="client-name">Client Name</label><span class="asterisk" style="font-size: 14px;"></span></div>
            <select name="clientName" id="client-name" class="form-control select-tag" required>
              <option value="" disabled selected hidden>Search</option>
              <% for (let client of clients) { %>
              <option value="<%= client %>"><%= client %></option>
              <% } %>
            </select>
          </div>
          <div id="user-name-div" class="span-six">
            <label for="user-name">User Name</label>
            <!-- <input type="text" id="user-name" class="form-control" name="userName" placeholder="Enter username" required /> -->
            <select name="userName" id="client-user-name" class="form-control select-tag" required>
              <option value="" selected disabled hidden>Search</option>
            </select>
          </div>
          <div id="user-name-contact-div" class="span-six">
            <label for="user-contact">User contact</label>
            <input type="text" id="user-contact" class="form-control" name="userContact" placeholder="Enter user contact" required />
          </div>
          <div id="client-location-div" class="span-seven">
            <label for="client-location">Location</label>
            <input type="text" id="client-location" class="form-control" name="location" placeholder="Enter location" required />
          </div>

          <div class="span-full form-subheading">
            <h1>Product Details</h1>
          </div>

          <div class="span-four">
            <label for="ttr-type">Type</label>
            <!-- <input type="text" id="ttr-type" class="form-control" name="ttrType" placeholder="Enter type" required /> -->
             <select name="ttrType" id="ttr-type" class="form-control select-tag" required>
              <option value="" selected disabled hidden>Select</option>
              <option value="WAX">WAX</option>
              <option value="WAX PREMIUM">WAX PREMIUM</option>
              <option value="WAX COLOR">WAX COLOR</option>
              <option value="WAX RESIN">WAX RESIN</option>
              <option value="WAX RESIN PREMIUM">WAX RESIN PREMIUM</option>
              <option value="WAX RESIN COLOR">WAX RESIN COLOR</option>
              <option value="RESIN">RESIN</option>
              <option value="RESIN COLOR">RESIN COLOR</option>
              <option value="SCRATCH PROOF">SCRATCH PROOF</option>
              <option value="WASHCARE">WASHCARE</option>
              <option value="TTO">TTO</option>
              </select>
          </div>
          <div class="span-four">
            <label for="ttr-color">Color</label>
            <!-- <input type="text" id="ttr-type" class="form-control" name="ttrType" placeholder="Enter type" required /> -->
             <select name="ttrColor" id="ttr-color" class="form-control select-tag" value="BLACK" required>
            <option value="BLACK">BLACK</option>
            <option value="RED">RED</option>
            <option value="GREEN">GREEN</option>
            <option value="BLUE">BLUE</option>
            <option value="YELLOW">YELLOW</option>
            <option value="GOLD">GOLD</option>
            <option value="SILVER">SILVER</option>
              </select>
          </div>

          <div class="span-four">
            <label for="ttr-material-code">Material Code</label>
            <input type="text" id="ttr-material-code" class="form-control" name="ttrMaterialCode" placeholder="Enter material code" required />
          </div>
          <div class="span-four">
            <label for="ttr-client-code">Client Code</label>
            <input type="text" id="ttr-client-code" class="form-control" name="ttrClientCode" placeholder="Enter client code" required />
          </div>
          <div class="span-four">
            <label for="ttr-width">Width</label>
            <input type="number" id="ttr-width" class="form-control" name="ttrWidth" placeholder="Enter width" required />
          </div>
          <div class="span-six">
            <label for="ttr-mtrs">MTRS</label>
            <input type="number" id="ttr-mtrs" class="form-control" name="ttrMtrs" placeholder="Enter mtrs" required />
          </div>
          <div class="span-six">
            <label for="ttr-mtrs-del">MTRS Delivered</label>
            <input type="text" id="ttr-mtrs-del" class="form-control" name="ttrMtrsDel" placeholder="Enter mtrs delivery" required />
          </div>             
          <div class="span-seven">
            <label for="ttr-ink-face">Ink face</label>
            <!-- <input type="text" id="ttr-ink-face" class="form-control" name="ttrInkFace" placeholder="Enter ink face" required /> -->
             <select name="ttrInkFace" id="ttr-ink-face" class="form-control select-tag" required>
              <!-- <option value="" selected disabled hidden>Select</option> -->
              <option value="IN">IN</option>
              <option value="OUT">OUT</option>
             </select>
          </div>
          <div class="span-six">
            <label for="ttr-core-id">Core ID</label>
            <!-- <input type="text" id="ttr-core-id" class="form-control" name="ttrCoreId" placeholder="Enter core id" required /> -->
             <select name="ttrCoreId" id=" ttr-core-id" class="form-control select-tag" required>
              <!-- <option value="" selected disabled hidden>Select </option> -->
              <option value="1">1</option>
              <option value="0.5">0.5</option>
            </select>
          </div>
          <div class="span-six">
            <label for="ttr-core-length">Core Length</label>
            <input type="number" id="ttr-core-length" class="form-control" name="ttrCoreLength" placeholder="Enter core length" required />
          </div>
          <div class="span-six">
            <label for="ttr-notch">Notch</label>
            <!-- <input type="text" id="ttr-notch" class="form-control" name="ttrNotch" placeholder="Enter notch" required /> -->
             <select name="ttrNotch" id="ttr-notch" class="form-control select-tag" required>
              <!-- <option value="" selected disabled hidden>Select</option> -->
              <option value="NO">NO</option>
              <option value="YES">YES</option>
              </select>
          </div>
          <div class="span-seven">
            <label for="ttr-winding">Winding</label>
            <!-- <input type="text" id="ttr-winding" class="form-control" name="ttrWinding" placeholder="Enter winding" required /> -->
             <select name="ttrWinding" id="ttr-winding" class="form-control select-tag" required>
               <option value="NORMAL">NORMAL</option>
              <option value="LEFT">LEFT</option>
              <option value="CENTER">CENTER</option>
            </select>
          </div>

          <div class="span-full form-subheading">
            <h1>Pricing & Order Terms</h1>
          </div>

          <div class="span-four">
            <label for="ttr-rate-per-roll">Rate Per Roll</label>
            <input type="text" id="ttr-rate-per-roll" class="form-control" name="ttrRatePerRoll" placeholder="Enter rate per roll" required />
          </div>
          <div class="span-five">
            <label for="ttr-sale-cost">Sale sq mtrs Cost</label>
            <input type="text" id="ttr-sale-cost" class="form-control" name="ttrSaleCost" placeholder="Enter sale cost" required />
          </div>
          <div class="span-five">
            <label for="ttr-min-qty">Minimum QTY</label>
            <input type="text" id="ttr-min-qty" class="form-control" name="ttrMinQty" placeholder="Enter minimum qty" required />
          </div>
          <div class="span-six">
            <label for="ttr-sin-odr-qty">Single Order QTY</label>
            <input type="text" id="ttr-sin-odr-qty" class="form-control" name="ttrSinOdrQty" placeholder="Enter single order qty" required />
          </div>
          <div class="span-seven">
            <label for="ttr-odr-freq">Repeat Order Freq</label>
            <input type="text" id="ttr-odr-freq" class="form-control" name="ttrOdrFreq" placeholder="Enter repeat order frequecy" required />
          </div>
          <div class="span-five">
            <label for="ttr-credit-term">CR</label>
            <input type="text" id="ttr-credit-term" class="form-control" name="ttrCreditTerm" placeholder="Enter credit term" required />
          </div>

          <input type="hidden" name="userId" id="user-id">

          <div class="btn-grp span-full">
            <button type="submit">Save TTR</button>
          </div>          
        </form>
      </div>

      <script>
        let width = document.querySelector("#ttr-width");
        let coreLenght = document.querySelector("#ttr-core-length");
        let mtrs = document.querySelector("#ttr-mtrs");
        let ratePerRoll = document.querySelector("#ttr-rate-per-roll");
        let saleCost = document.querySelector("#ttr-sale-cost");
      
        width.addEventListener("input", () => {
          coreLenght.value = width.value;
        });

        width.addEventListener("input", getSalesCost);
        ratePerRoll.addEventListener("input", getSalesCost);
        mtrs.addEventListener("input", getSalesCost);

        function getSalesCost() {
          let x = width.value * mtrs.value / 1000;
          let y = ratePerRoll.value / x;
          saleCost.value = y.toFixed(4);
          
        }
      </script>